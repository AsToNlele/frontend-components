"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var objectWithoutProperties=require("./objectWithoutProperties-9e2b4e81.js"),slicedToArray=require("./slicedToArray-359307e9.js"),React=require("react"),React__default=_interopDefault(React),PropTypes=_interopDefault(require("prop-types")),toConsumableArray=require("./toConsumableArray-fe9ed082.js"),useFormApi=_interopDefault(require("@data-driven-forms/react-form-renderer/dist/cjs/use-form-api")),Card_js=require("@patternfly/react-core/dist/js/components/Card/Card.js"),CardBody_js=require("@patternfly/react-core/dist/js/components/Card/CardBody.js"),FormGroup_js=require("@patternfly/react-core/dist/js/components/Form/FormGroup.js"),Grid_js=require("@patternfly/react-core/dist/js/layouts/Grid/Grid.js"),GridItem_js=require("@patternfly/react-core/dist/js/layouts/Grid/GridItem.js"),Bullseye_js=require("@patternfly/react-core/dist/js/layouts/Bullseye/Bullseye.js"),CardTitle_js=require("@patternfly/react-core/dist/js/components/Card/CardTitle.js"),useFieldApi=_interopDefault(require("@data-driven-forms/react-form-renderer/dist/cjs/use-field-api")),handleKeyPress=function handleKeyPress(e,r,t){32===e.charCode&&(e.preventDefault(),t(r))},CardSelect=function CardSelect(e){var r=useFieldApi(e),t=r.isRequired,a=r.label,o=r.helperText,s=r.hideLabel,i=r.meta,n=r.input,l=r.options,u=r.mutator,d=r.DefaultIcon,c=r.iconMapper,p=objectWithoutProperties._objectWithoutProperties(r,["isRequired","label","helperText","hideLabel","meta","input","options","mutator","DefaultIcon","iconMapper"]),f=useFormApi(),y=React.useState((function(){var e={};return l.forEach((function(r){var t=r.value;return e[t]=c(t,d)})),e})),m=slicedToArray._slicedToArray(y,1)[0],_=p.isMulti||p.multi,j=p.isDisabled||p.isReadOnly,b=n.value||[],C=function handleClick(e){return _?function handleMulti(e){return n.onChange(b.includes(e)?b.filter((function(r){return r!==e})):[].concat(toConsumableArray._toConsumableArray(b),[e]))}(e):function handleSingle(e){return n.onChange(b===e?void 0:e)}(e)},T=function onClick(e){j||(C(e),n.onBlur())},P=i.error,h=i.touched&&P;return React__default.createElement(FormGroup_js.FormGroup,{isRequired:t,label:!s&&a,fieldId:n.name,helperText:o,helperTextInvalid:P,validated:h?"error":"default"},React__default.createElement(Grid_js.Grid,{hasGutter:!0,className:"pf-u-mb-md"},function prepareCards(){return l.map((function(e){return u(e,f)})).map((function(e){var r=e.value,t=e.label,a=e.isDisabled||j;if(r){var o=m[r];return(React__default.createElement(GridItem_js.GridItem,{sm:6,md:4,key:r},React__default.createElement(Card_js.Card,{className:"ins-c-sources__wizard--card".concat(b.includes(r)?" selected":"").concat(a?" disabled":""),onClick:function onClick(){return T(r)},tabIndex:a?-1:0,onKeyPress:function onKeyPress(e){return handleKeyPress(e,r,T)},isHoverable:!a,isCompact:!0},React__default.createElement("div",{className:a?"disabled":""},!o&&React__default.createElement(CardTitle_js.CardTitle,{className:"text-elipsis"},t),o&&React__default.createElement(CardBody_js.CardBody,null,React__default.createElement(Bullseye_js.Bullseye,null,React__default.createElement(o,{size:"md"})))))))}}))}()))};CardSelect.propTypes={multi:PropTypes.bool,isMulti:PropTypes.bool,label:PropTypes.node,isRequired:PropTypes.bool,helperText:PropTypes.node,description:PropTypes.node,hideLabel:PropTypes.bool,name:PropTypes.string.isRequired,mutator:PropTypes.func,options:PropTypes.array,DefaultIcon:PropTypes.oneOfType([PropTypes.node,PropTypes.func,PropTypes.element]),iconMapper:PropTypes.func,isDisabled:PropTypes.bool,isReadOnly:PropTypes.bool},CardSelect.defaultProps={options:[],iconMapper:function iconMapper(e,r){return r},mutator:function mutator(e){return e}},exports.default=CardSelect;
